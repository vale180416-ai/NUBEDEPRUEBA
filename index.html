<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Inventario de Cosméticos</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 950px; margin: 40px auto; }
        h2 { color: #a76ab8; }
        .form-group { margin-bottom: 10px; }
        label { display: block; margin-bottom: 3px;}
        input, select { padding: 5px; }
        table { width: 100%; border-collapse: collapse; margin-top: 25px;}
        th, td { border: 1px solid #bbb; padding: 8px;}
        th { background: #efe9f6;}
        .btn { padding: 6px 13px; border: none; background: #a76ab8; color: #fff; cursor: pointer;}
        .btn.delete { background: #e84137;}
        .btn.save { background: #47b86e;}
        .btn.cancel { background: #bbb;}
        #search {margin: 15px 0 8px 0; width: 50%;}
    </style>
</head>
<body>
<h2>Inventario de Cosméticos</h2>

<form id="productoForm">
    <div class="form-group">
        <label for="nombre">Nombre del Producto:</label>
        <input type="text" id="nombre" required>
    </div>
    <div class="form-group">
        <label for="categoria">Categoría:</label>
        <select id="categoria" required>
            <option value="Maquillaje">Maquillaje</option>
            <option value="Cuidado de la piel">Cuidado de la piel</option>
            <option value="Fragancias">Fragancias</option>
            <option value="Cabello">Cabello</option>
            <option value="Otros">Otros</option>
        </select>
    </div>
    <div class="form-group">
        <label for="cantidad">Cantidad:</label>
        <input type="number" id="cantidad" required min="1">
    </div>
    <div class="form-group">
        <label for="precio">Precio Unitario ($):</label>
        <input type="number" id="precio" required min="0" step="0.01">
    </div>
    <div class="form-group">
        <label for="proveedor">Proveedor:</label>
        <input type="text" id="proveedor" required>
    </div>
    <button type="submit" class="btn">Agregar Producto</button>
</form>

<input type="text" id="search" placeholder="Buscar por nombre o categoría...">

<table id="tablaInventario">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Categoría</th>
            <th>Cantidad</th>
            <th>Precio Unitario</th>
            <th>Proveedor</th>
            <th>Acción</th>
        </tr>
    </thead>
    <tbody>
        <!-- Los productos van aquí -->
    </tbody>
</table>

<script>
let inventario = [];
let editando = -1; // Índice de producto editado

function renderTabla(filtro = "") {
    const tbody = document.querySelector("#tablaInventario tbody");
    tbody.innerHTML = "";

    inventario.forEach((producto, i) => {
        // Filtrar por nombre o categoría
        if (
            !producto.nombre.toLowerCase().includes(filtro.toLowerCase()) &&
            !producto.categoria.toLowerCase().includes(filtro.toLowerCase())
        ) return;

        const tr = document.createElement("tr");

        // Modo edición
        if (editando === i) {
            tr.innerHTML = `
                <td><input type="text" value="${producto.nombre}" id="edit-nombre"></td>
                <td>
                    <select id="edit-categoria">
                        <option ${producto.categoria === "Maquillaje" ? "selected":""}>Maquillaje</option>
                        <option ${producto.categoria === "Cuidado de la piel" ? "selected":""}>Cuidado de la piel</option>
                        <option ${producto.categoria === "Fragancias" ? "selected":""}>Fragancias</option>
                        <option ${producto.categoria === "Cabello" ? "selected":""}>Cabello</option>
                        <option ${producto.categoria === "Otros" ? "selected":""}>Otros</option>
                    </select>
                </td>
                <td><input type="number" min="1" value="${producto.cantidad}" id="edit-cantidad"></td>
                <td><input type="number" min="0" step="0.01" value="${producto.precio}" id="edit-precio"></td>
                <td><input type="text" value="${producto.proveedor}" id="edit-proveedor"></td>
                <td>
                    <button class="btn save" onclick="guardarEdicion(${i})">Guardar</button>
                    <button class="btn cancel" onclick="cancelarEdicion()">Cancelar</button>
                </td>
            `;
        } else {
            tr.innerHTML = `
                <td>${producto.nombre}</td>
                <td>${producto.categoria}</td>
                <td>${producto.cantidad}</td>
                <td>$${parseFloat(producto.precio).toFixed(2)}</td>
                <td>${producto.proveedor}</td>
                <td>
                    <button class="btn" onclick="iniciarEdicion(${i})">Editar</button>
                    <button class="btn delete" onclick="eliminarProducto(${i})">Eliminar</button>
                </td>
            `;
        }
        tbody.appendChild(tr);
    });
}

function iniciarEdicion(index) {
    editando = index;
    renderTabla(document.getElementById('search').value);
}

function cancelarEdicion() {
    editando = -1;
    renderTabla(document.getElementById('search').value);
}

function guardarEdicion(index) {
    // Obtener valores editados
    const nombre = document.getElementById("edit-nombre").value;
    const categoria = document.getElementById("edit-categoria").value;
    const cantidad = parseInt(document.getElementById("edit-cantidad").value);
    const precio = document.getElementById("edit-precio").value;
    const proveedor = document.getElementById("edit-proveedor").value;

    inventario[index] = { nombre, categoria, cantidad, precio, proveedor };
    editando = -1;
    renderTabla(document.getElementById('search').value);
}

function eliminarProducto(index) {
    if (confirm("¿Eliminar este producto del inventario?")) {
        inventario.splice(index, 1);
        cancelarEdicion();
    }
}

document.getElementById("productoForm").addEventListener("submit", function(e) {
    e.preventDefault();
    const producto = {
        nombre: document.getElementById("nombre").value,
        categoria: document.getElementById("categoria").value,
        cantidad: parseInt(document.getElementById("cantidad").value),
        precio: document.getElementById("precio").value,
        proveedor: document.getElementById("proveedor").value
    };
    inventario.push(producto);
    this.reset();
    cancelarEdicion();
});

document.getElementById("search").addEventListener("input", function() {
    renderTabla(this.value);
});

renderTabla();
</script>
</body>
</html>